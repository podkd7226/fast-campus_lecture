# π¨ λ°μ΄ν„° λ¶„μ„ μ¤λ¥ ν‰κ°€ λ° μλ°© κ°€μ΄λ“

## π“ κ°μ”

μ΄ λ¬Έμ„λ” MIMIC-IV λ°μ΄ν„° λ¶„μ„ κ³Όμ •μ—μ„ μ‹¤μ λ΅ λ°μƒν• μ¤λ¥λ“¤μ„ μ²΄κ³„μ μΌλ΅ μ •λ¦¬ν•κ³ , 
ν–¥ν›„ μ μ‚¬ν• μ‹¤μλ¥Ό μλ°©ν•κΈ° μ„ν• κ°€μ΄λ“λΌμΈμ„ μ κ³µν•©λ‹λ‹¤.

**ν•µμ‹¬ κµν›**: "μ‘λ™ν•λ” μ½”λ“ β‰  μ¬λ°”λ¥Έ λ¶„μ„"

---

## β οΈ μ£Όμ” μ¤λ¥ μ ν• λ° μ²΄ν¬λ¦¬μ¤νΈ

### 1. λ°μ΄ν„° λ§¤μΉ­ μ¤λ¥ β…
- [ ] JOIN λ°©μ‹ ν™•μΈ (INNER vs LEFT)
- [ ] NULL κ°’ μ²λ¦¬ ν™•μΈ
- [ ] λ§¤μΉ­ ν‚¤μ μ™„μ „μ„± κ²€μ¦
- [ ] μ „μ²΄ λ°μ΄ν„° κ°μ λ³΄μ΅΄ ν™•μΈ

**μ‹¤μ  μ‚¬λ΅€**: [hadm_id λ§¤μΉ­ μ‹¤ν¨λ΅ 616κ±΄ λ„λ½](./data_matching_errors.md)
- κ²°κ³Ό: 1,043κ±΄ β†’ 427κ±΄μΌλ΅ μ¶•μ† (59% μ†μ‹¤)

### 2. μ„ νƒ νΈν–¥ (Selection Bias) β…
- [ ] μ „μ²΄ λ¨μ§‘λ‹¨ λ€ν‘μ„± ν™•μΈ
- [ ] ν•„ν„°λ§ μ΅°κ±΄μ νƒ€λ‹Ήμ„± κ²€μ¦
- [ ] μ μ™Έλ λ°μ΄ν„°μ νΉμ„± λ¶„μ„
- [ ] κ²°κ³Όμ μΌλ°ν™” κ°€λ¥μ„± ν‰κ°€

**μ‹¤μ  μ‚¬λ΅€**: [21κ° κ²€μ‚¬λ§ μ„ νƒν• λ¶„μ„](./selection_bias_analysis.md)
- μν–¥: μ‚¬λ§λ¥  μ™κ³΅ (36.5% vs μ‹¤μ  25.0%)

### 3. μƒμ΅΄μ νΈν–¥ (Survivorship Bias) β…
- [ ] λ¶„μ„μ—μ„ μ μ™Έλ μΌ€μ΄μ¤ ν™•μΈ
- [ ] λ°μ΄ν„°κ°€ μ—†λ” μ΄μ  νμ•…
- [ ] Missing Not At Random (MNAR) κ²€ν† 
- [ ] μ™„μ „ μΌ€μ΄μ¤ λ¶„μ„μ ν•κ³„ μΈμ‹

**μμ‹**: κ²€μ‚¬λ¥Ό ν•μ§€ μ•μ€ ν™μ μ μ™Έ
- λ¬Έμ : λ„λ¬΄ κ±΄κ°•ν•κ±°λ‚ λ„λ¬΄ μ•„νμ„ κ²€μ‚¬ λ»ν•¨

### 4. λ°μ΄ν„° μ™„μ „μ„± μ¤λ¥ β…
- [ ] μ…λ ¥ λ°μ΄ν„° μ = μ¶λ ¥ λ°μ΄ν„° μ
- [ ] μμƒ λ²”μ„μ™€ μ‹¤μ  κ²°κ³Ό λΉ„κµ
- [ ] κ·Ήλ‹¨κ°’ λ° μ΄μƒμΉ ν™•μΈ
- [ ] λ°μ΄ν„° νƒ€μ… μΌκ΄€μ„±

**κ²€μ¦ λ„κµ¬**: [verify_data_completeness.py](./scripts/verify_data_completeness.py)

---

## π” μ‹¤μ  μ¤λ¥ μ‚¬λ΅€ λ¶„μ„

### μ‚¬λ΅€ 1: hadm_id NULL μ²λ¦¬ μ‹¤ν¨

| λ¶„μ„ λ°©λ²• | κ²°κ³Ό | λ¬Έμ μ  |
|----------|------|--------|
| μλ»λ λ°©λ²• | 427κ±΄ (35.6%) | hadm_id NULL λ¬΄μ‹ |
| μ¬λ°”λ¥Έ λ°©λ²• | 1,043κ±΄ (86.9%) | subject_id + λ‚ μ§ λ§¤μΉ­ |

**μƒμ„Έ λ¶„μ„**: [λ°μ΄ν„° λ§¤μΉ­ μ¤λ¥ λ¶„μ„](./data_matching_errors.md)

### μ‚¬λ΅€ 2: ν•λ“μ½”λ”©λ κ²€μ‚¬ ν•­λ©

| μ ‘κ·Όλ²• | κ²€μ‚¬ μ | μ»¤λ²„λ¦¬μ§€ | μ‚¬λ§λ¥  |
|--------|---------|----------|--------|
| ν•λ“μ½”λ”© | 21κ° | 35.6% | 36.5% |
| inclusion=1 | 98κ° | 87.8% | 25.0% |

**μƒμ„Έ λ¶„μ„**: [μ„ νƒ νΈν–¥ λ¶„μ„](./selection_bias_analysis.md)

---

## π’΅ μλ°© κ°€μ΄λ“λΌμΈ

### 1. λ°μ΄ν„° λ΅λ”© λ‹¨κ³„
```python
# β μλ»λ μ
df_filtered = df[df['condition'] == True]  # μ΅°κ±΄ λ§λ” κ²ƒλ§

# β… μ¬λ°”λ¥Έ μ
df_all = df.copy()  # μ „μ²΄ μ μ§€
df_all['meets_condition'] = df_all['condition'] == True
```

### 2. JOIN μ‘μ—…
```python
# β μ„ν—ν• INNER JOIN
result = df1.merge(df2, on='key', how='inner')
# λ§¤μΉ­ μ• λλ” λ°μ΄ν„° μ†μ‹¤

# β… μ•μ „ν• LEFT JOIN
result = df1.merge(df2, on='key', how='left')
# λ¨λ“  λ°μ΄ν„° λ³΄μ΅΄
```

### 3. NULL μ²λ¦¬
```python
# β NULL λ¬΄μ‹
df_clean = df.dropna()

# β… NULL λ¶„μ„
print(f"NULL λΉ„μ¨: {df.isna().mean()}")
print(f"NULL ν¨ν„΄: {df.isna().sum()}")
```

### 4. κ²€μ¦ λ£¨ν‹΄
```python
# β… ν•­μƒ κ²€μ¦
assert len(output_df) == len(input_df), "λ°μ΄ν„° μ†μ‹¤ λ°μƒ!"
assert output_df['key'].nunique() == input_df['key'].nunique()
```

---

## π“ κ²€μ¦ λ„κµ¬

### 1. λ°μ΄ν„° μ™„μ „μ„± κ²€μ¦
```bash
python scripts/verify_data_completeness.py \
    --input data/original.csv \
    --output data/processed.csv
```

### 2. λ¶„μ„ λ°©λ²• λΉ„κµ
```bash
python scripts/compare_analysis_methods.py \
    --method1 ../analysis_initial_lab/scripts/analysis/extract_admission_day_labs.py \
    --method2 ../analysis_initial_lab/scripts/analysis/extract_initial_labs_complete.py
```

---

## π“ μ°Έκ³  μλ£

### λ‚΄λ¶€ λ¬Έμ„
- [λ°μ΄ν„° λ§¤μΉ­ μ¤λ¥ μƒμ„Έ](./data_matching_errors.md)
- [μ„ νƒ νΈν–¥ λ¶„μ„](./selection_bias_analysis.md)
- [μ‹¤μ  μ‚¬λ΅€: analysis_initial_lab](../analysis_initial_lab/README.md)

### μ™Έλ¶€ μλ£
- [Statistical Bias Types](https://en.wikipedia.org/wiki/Bias_(statistics))
- [Data Quality Assessment](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3797360/)
- [MIMIC-IV Documentation](https://mimic.mit.edu/)

---

## π― ν•µμ‹¬ κµν›

> **"λ°μ΄ν„° λ¶„μ„μ 90%λ” λ°μ΄ν„° μ „μ²λ¦¬"**
> 
> ν•μ§€λ§ μλ»λ μ „μ²λ¦¬λ” 100% μλ»λ κ²°λ΅ μΌλ΅ μ΄μ–΄μ§‘λ‹λ‹¤.

### κΈ°μ–µν•΄μ•Ό ν•  μ›μΉ™

1. **μμ‹¬ν•λΌ**: μμƒκ³Ό λ‹¤λ¥Έ κ²°κ³Όκ°€ λ‚μ¤λ©΄ μ½”λ“λ¥Ό μμ‹¬
2. **κ²€μ¦ν•λΌ**: κ° λ‹¨κ³„λ§λ‹¤ λ°μ΄ν„° μμ™€ λ¶„ν¬ ν™•μΈ
3. **λ³΄μ΅΄ν•λΌ**: μ›λ³Έ λ°μ΄ν„°λ” μµλ€ν• μ μ§€
4. **λ¬Έμ„ν™”ν•λΌ**: μ μ™Έλ λ°μ΄ν„°μ™€ κ·Έ μ΄μ  λ…μ‹
5. **μ¬ν„ν•λΌ**: λ‹¤λ¥Έ μ‚¬λμ΄ κ°™μ€ κ²°κ³Όλ¥Ό μ–»μ„ μ μκ²

---

## π”„ μ—…λ°μ΄νΈ μ΄λ ¥

| λ‚ μ§ | λ‚΄μ© | κ΄€λ ¨ μ΄μ |
|------|------|-----------|
| 2025-08-20 | μµμ΄ μ‘μ„± | hadm_id λ§¤μΉ­ μ¤λ¥ λ°κ²¬ |
| 2025-08-20 | μ„ νƒ νΈν–¥ μ‚¬λ΅€ μ¶”κ°€ | 21κ° vs 98κ° κ²€μ‚¬ |

---

*μ‘μ„±μ: Claude*  
*κ²€ν†  ν•„μ”: λ°μ΄ν„° λ¶„μ„ν€*  
*λ‹¤μ μ—…λ°μ΄νΈ: μƒλ΅μ΄ μ¤λ¥ λ°κ²¬ μ‹*