# 입원 당일 혈액검사 결측값 분석 보고서

## 요약

본 보고서는 1,200개 입원 건에 대한 입원 당일 혈액검사 데이터의 결측값 패턴을 상세히 분석합니다. 87개 목표 검사 중 45개만 실제 데이터가 존재하며, 평균 결측률은 75.3%로 매우 높은 수준입니다.

---

## 1. 전체 결측값 현황

### 1.1 결측값 통계 요약

| 구분 | 값 | 설명 |
|------|-----|------|
| 전체 입원 | 1,200 | 100% 유지 |
| 검사가 있는 입원 | 1,053 | 87.8% |
| 검사가 없는 입원 | 147 | 12.2% (완전 결측) |
| 평균 결측률 | 75.3% | 전체 검사 항목 기준 |
| 중앙값 결측률 | 82.3% | 전체 검사 항목 기준 |

### 1.2 결측값 분포

```
결측률 범위     검사 수   비율     누적비율
============================================
0-10%          0개      0.0%     0.0%
10-20%         0개      0.0%     0.0%
20-30%         9개      20.0%    20.0%
30-40%         2개      4.4%     24.4%
40-50%         3개      6.7%     31.1%
50-60%         1개      2.2%     33.3%
60-70%         1개      2.2%     35.6%
70-80%         1개      2.2%     37.8%
80-90%         5개      11.1%    48.9%
90-100%        23개     51.1%    100.0%
```

---

## 2. 검사별 결측값 분석

### 2.1 낮은 결측률 검사 (< 30%)

| 검사명 | 가용률 | 결측률 | 임상적 의의 |
|--------|--------|--------|------------|
| Hematocrit | 78.0% | 22.0% | 적혈구 용적률, 빈혈 평가 |
| Hemoglobin | 76.8% | 23.2% | 산소 운반 능력 평가 |
| Creatinine | 76.1% | 23.9% | 신장 기능 평가 |
| RDW | 75.8% | 24.2% | 적혈구 크기 분포 |
| White Blood Cells | 75.8% | 24.2% | 감염/염증 평가 |
| Urea Nitrogen | 75.8% | 24.2% | 신장 기능, 탈수 평가 |
| Potassium | 75.7% | 24.3% | 전해질 균형 |
| Sodium | 75.0% | 25.0% | 전해질 균형 |
| Glucose | 74.1% | 25.9% | 혈당 조절 평가 |

**특징**: 기본 혈액검사(CBC)와 기본대사패널(BMP)이 대부분 포함

### 2.2 중간 결측률 검사 (30-70%)

| 검사명 | 가용률 | 결측률 | 임상적 의의 |
|--------|--------|--------|------------|
| Basophils | 50.8% | 49.2% | 알레르기, 면역 반응 |
| Eosinophils | 50.8% | 49.2% | 알레르기, 기생충 감염 |
| PT | 50.8% | 49.2% | 응고 기능 평가 |
| PTT | 49.9% | 50.1% | 응고 경로 평가 |
| Calcium, Total | 45.6% | 54.4% | 칼슘 대사 |
| Bilirubin, Total | 35.2% | 64.8% | 간기능, 황달 평가 |
| Lactate | 33.5% | 66.5% | 조직 관류, 쇼크 평가 |

**특징**: CBC 세부항목과 응고검사가 주를 이룸

### 2.3 높은 결측률 검사 (70-95%)

| 검사명 | 가용률 | 결측률 | 임상적 의의 |
|--------|--------|--------|------------|
| Albumin | 26.4% | 73.6% | 영양 상태, 간기능 |
| pH | 19.2% | 80.8% | 산염기 평형 |
| pO2 | 17.8% | 82.2% | 산소 분압 |
| pCO2 | 17.7% | 82.3% | 이산화탄소 분압 |
| Creatine Kinase | 17.2% | 82.8% | 근육 손상 지표 |
| Troponin T | 13.0% | 87.0% | 심근 손상 지표 |
| Chloride, Whole Blood | 7.4% | 92.6% | 전해질 균형 |
| NTproBNP | 6.5% | 93.5% | 심부전 지표 |

**특징**: 동맥혈가스분석(ABG)과 특수 검사들

### 2.4 극심한 결측률 검사 (> 95%)

| 검사명 | 가용률 | 결측률 | 검사 건수 |
|--------|--------|--------|-----------|
| % Hemoglobin A1c | 3.3% | 96.7% | 40건 |
| Calculated Bicarbonate | 3.2% | 96.8% | 38건 |
| Ferritin | 3.1% | 96.9% | 37건 |
| C-Reactive Protein | 2.3% | 97.7% | 28건 |
| Triglycerides | 2.3% | 97.7% | 28건 |
| Folate | 1.2% | 98.8% | 14건 |
| D-Dimer | 1.1% | 98.9% | 13건 |
| O2 Flow | 0.8% | 99.2% | 9건 |
| Creatinine, Whole Blood | 0.5% | 99.5% | 6건 |
| Rheumatoid Factor | 0.08% | 99.92% | 1건 |
| Thrombin | 0.08% | 99.92% | 1건 |
| WBC Count | 0.08% | 99.92% | 1건 |

**특징**: 특수 검사 및 선택적 검사들

### 2.5 완전 결측 검사 (100%)

87개 목표 검사 중 42개 검사는 1,200개 입원 중 단 한 건도 시행되지 않았습니다.
이는 다음과 같은 이유로 추정됩니다:
- 입원 당일이 아닌 다른 날 시행
- 특수한 임상 상황에서만 시행
- 외래나 응급실에서 사전 시행

---

## 3. 입원별 결측 패턴

### 3.1 입원당 검사 수 분포

| 검사 수 범위 | 입원 수 | 비율 | 누적 비율 |
|-------------|---------|------|-----------|
| 0개 | 147 | 12.2% | 12.2% |
| 1-5개 | 89 | 7.4% | 19.6% |
| 6-10개 | 124 | 10.3% | 29.9% |
| 11-15개 | 286 | 23.8% | 53.7% |
| 16-20개 | 334 | 27.8% | 81.5% |
| 21-25개 | 178 | 14.8% | 96.3% |
| 26-30개 | 36 | 3.0% | 99.3% |
| 31개 이상 | 6 | 0.5% | 100.0% |

**통계**:
- 평균: 13.7개
- 중앙값: 15개
- 표준편차: 8.2개
- 최소: 0개
- 최대: 38개

### 3.2 생존/사망별 결측 패턴

| 그룹 | 평균 검사 수 | 중앙값 | 완전 결측 입원 |
|------|-------------|--------|---------------|
| 생존 (n=900) | 13.6개 | 15개 | 110건 (12.2%) |
| 사망 (n=300) | 13.9개 | 15개 | 37건 (12.3%) |

**주요 차이점**:
- 사망 그룹에서 Lactate 검사 시행률 높음 (59.3% vs 24.9%)
- 사망 그룹에서 pH, pCO2, pO2 등 ABG 검사 시행률 높음
- 사망 그룹에서 Troponin T 시행률 높음 (27.3% vs 8.2%)

---

## 4. 결측값 패턴의 임상적 의미

### 4.1 계획적 결측 (Planned Missing)
- **기본 검사 우선**: CBC, BMP는 낮은 결측률 (20-25%)
- **단계적 검사**: 기본 검사 이상 시 추가 검사 시행
- **프로토콜 기반**: 입원 시 표준 검사 세트 존재

### 4.2 무작위 결측 (Random Missing)
- **시간적 요인**: 입원 시간에 따른 검사 시행 차이
- **부서별 차이**: ICU vs 일반 병동의 검사 패턴 차이
- **의료진 판단**: 임상 상황에 따른 선택적 시행

### 4.3 정보적 결측 (Informative Missing)
- **중증도 관련**: Lactate, ABG는 중증 환자에서 주로 시행
- **진단 관련**: Troponin은 심장 문제 의심 시만 시행
- **비용 관련**: 고가 검사는 필요시만 선택적 시행

---

## 5. 머신러닝 모델링을 위한 고려사항

### 5.1 결측값 처리 전략

#### Option 1: 완전 제거 (Complete Case Analysis)
- **장점**: 간단한 처리
- **단점**: 147개(12.2%) 입원 손실
- **적용**: 기본 검사만 사용 시

#### Option 2: 결측값 대체 (Imputation)
- **평균/중앙값 대체**: 연속형 변수에 적용
- **최빈값 대체**: 범주형 변수에 적용
- **KNN/MICE**: 다변량 대체 방법
- **주의**: 높은 결측률(>70%) 검사는 신중히 처리

#### Option 3: 결측 지시자 (Missing Indicator)
- **방법**: 결측 여부를 별도 변수로 추가
- **장점**: 결측 자체가 가진 정보 활용
- **적용**: Tree 기반 모델에 유용

### 5.2 변수 선택 권장사항

#### 필수 포함 변수 (결측률 < 30%)
- Hematocrit, Hemoglobin, Creatinine
- RDW, White Blood Cells, Urea Nitrogen
- Potassium, Sodium, Glucose

#### 조건부 포함 변수 (결측률 30-70%)
- PT, PTT (응고 관련)
- Calcium, Bilirubin (대사 관련)
- Lactate (중증도 지표)

#### 제외 권장 변수 (결측률 > 90%)
- 극히 적은 데이터로 편향 위험
- 별도 분석이나 서브그룹 분석에만 활용

---

## 6. 권장사항

### 6.1 데이터 수집 개선
1. **시간 윈도우 확장**: 입원 전후 ±24시간으로 확장 검토
2. **응급실 데이터 포함**: 입원 직전 응급실 검사 통합
3. **대체 시점 활용**: 입원 당일 없으면 익일 오전 검사 활용

### 6.2 분석 전략
1. **단계적 모델링**: 
   - Step 1: 낮은 결측률 변수만으로 기본 모델
   - Step 2: 중간 결측률 변수 추가하여 성능 비교
   - Step 3: 결측 패턴 자체를 특징으로 활용

2. **앙상블 접근**:
   - 완전 데이터 모델 + 결측 허용 모델 조합
   - 검사 가용성별 서브모델 구성

3. **해석 가능성 중시**:
   - 결측이 많은 변수의 영향력 신중히 해석
   - 임상적 타당성 검증 필수

---

## 7. 결론

입원 당일 혈액검사 데이터는 평균 75.3%의 높은 결측률을 보이며, 이는 주로 계획적이고 정보적인 결측입니다. 기본 검사(CBC, BMP)는 상대적으로 낮은 결측률(20-25%)을 보이는 반면, 특수 검사들은 극히 높은 결측률(>95%)을 나타냅니다.

이러한 결측 패턴은:
1. 임상 프로토콜을 반영하는 자연스러운 현상
2. 환자 중증도와 관련된 정보를 포함
3. 머신러닝 모델링 시 신중한 처리 필요

효과적인 예측 모델 개발을 위해서는 결측값 자체가 가진 정보를 활용하면서도, 과도한 대체로 인한 편향을 피하는 균형잡힌 접근이 필요합니다.

---

*작성일: 2025-08-19*  
*분석 도구: Python 3.x, pandas*  
*데이터: MIMIC-IV 샘플 1,200건*