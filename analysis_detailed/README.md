# ğŸ”¬ MIMIC ë°ì´í„° ìƒì„¸ ë¶„ì„

## ğŸ“Œ ê°œìš”
MIMIC-IV ë°ì´í„°ì…‹ì˜ ì§„ë‹¨, ì²˜ë°©, ê²€ì‚¬ ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ ì˜ë£Œ ì„œë¹„ìŠ¤ ì´ìš© íŒ¨í„´ì„ 
ì‹¬ì¸µì ìœ¼ë¡œ ë¶„ì„í•©ë‹ˆë‹¤. ì´ ë¶„ì„ì€ ì§ˆë³‘ ë¶€ë‹´, ì¹˜ë£Œ íŒ¨í„´, ì˜ë£Œ ìì› í™œìš©ì„ 
ì´í•´í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.

## ğŸ¯ ë¶„ì„ ëª©í‘œ
- ëª©í‘œ 1: ì£¼ìš” ì§„ë‹¨ëª…ê³¼ ì§ˆë³‘ íŒ¨í„´ íŒŒì•…
- ëª©í‘œ 2: ì•½ë¬¼ ì²˜ë°© íŒ¨í„´ ë¶„ì„
- ëª©í‘œ 3: ì§„ë£Œê³¼ë³„ ì„œë¹„ìŠ¤ ì´ìš© í˜„í™© ë¶„ì„
- ëª©í‘œ 4: ê²€ì‚¬ ê²°ê³¼ì™€ ì„ìƒ ì§€í‘œ ë¶„ì„

## ğŸ“Š ì‚¬ìš© ë°ì´í„°
| íŒŒì¼ëª… | ì„¤ëª… | ë¶„ì„ í–‰ ìˆ˜ |
|--------|------|------------|
| `../dataset2/hosp/diagnoses_icd.csv` | ICD ì§„ë‹¨ ì½”ë“œ | 50,000 í–‰ |
| `../dataset2/hosp/prescriptions.csv` | ì•½ë¬¼ ì²˜ë°© ì •ë³´ | 50,000 í–‰ |
| `../dataset2/hosp/labevents.csv` | ê²€ì‚¬ ê²°ê³¼ | 100,000 í–‰ |
| `../dataset2/hosp/services.csv` | ì§„ë£Œê³¼ ì •ë³´ | 50,000 í–‰ |
| `../dataset2/hosp/d_icd_diagnoses.csv` | ICD ì½”ë“œ ì„¤ëª… | ì „ì²´ |
| `../dataset2/hosp/d_labitems.csv` | ê²€ì‚¬ í•­ëª© ì„¤ëª… | ì „ì²´ |

## ğŸ”§ ì£¼ìš” ì½”ë“œ ì„¤ëª…

### 1. ë°ì´í„° ë¡œë”© (mimic_detailed_analysis.py:18-28)

**ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬**:
```python
labevents_df = pd.read_csv('dataset2/hosp/labevents.csv', 
                           nrows=100000,
                           low_memory=False)
```
ë©”ëª¨ë¦¬ íš¨ìœ¨ì„ ìœ„í•´ `low_memory=False` ì˜µì…˜ì„ ì‚¬ìš©í•˜ê³  í–‰ ìˆ˜ë¥¼ ì œí•œí•©ë‹ˆë‹¤.

### 2. ì§„ë‹¨ ë°ì´í„° ë¶„ì„ (mimic_detailed_analysis.py:30-75)

**ICD ì½”ë“œ ë³‘í•©** (mimic_detailed_analysis.py:32-34):
```python
diagnoses_with_names = diagnoses_df.merge(
    d_icd_diagnoses_df[['icd_code', 'long_title']], 
    on='icd_code', 
    how='left'
)
```
ì§„ë‹¨ ì½”ë“œì™€ ì‹¤ì œ ì§ˆë³‘ëª…ì„ ì—°ê²°í•˜ì—¬ ì´í•´í•˜ê¸° ì‰½ê²Œ ë§Œë“­ë‹ˆë‹¤.

**ì£¼ìš” ì§„ë‹¨ ë¶„ë¥˜** (mimic_detailed_analysis.py:40-56):
- ìˆœí™˜ê¸°ê³„ ì§ˆí™˜: I00-I99 (ì‹¬ì¥ë³‘, ë‡Œì¡¸ì¤‘ ë“±)
- í˜¸í¡ê¸°ê³„ ì§ˆí™˜: J00-J99 (íë ´, COPD ë“±)
- ì†Œí™”ê¸°ê³„ ì§ˆí™˜: K00-K93 (ìœ„ì¥ ì§ˆí™˜ ë“±)
- ë‚´ë¶„ë¹„ê³„ ì§ˆí™˜: E00-E90 (ë‹¹ë‡¨ë³‘ ë“±)
- ì‹ ê²½ê³„ ì§ˆí™˜: G00-G99 (ì¹˜ë§¤, íŒŒí‚¨ìŠ¨ë³‘ ë“±)

**ì§„ë‹¨ ìš°ì„ ìˆœìœ„ ë¶„ì„** (mimic_detailed_analysis.py:58-62):
```python
primary_diagnoses = diagnoses_with_names[diagnoses_with_names['seq_num'] == 1]
```
`seq_num = 1`ì¸ ì§„ë‹¨ì´ ì£¼ì§„ë‹¨(primary diagnosis)ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

### 3. ì•½ë¬¼ ì²˜ë°© ë¶„ì„ (mimic_detailed_analysis.py:77-120)

**ì²˜ë°© íŒ¨í„´ ë¶„ì„ ìš”ì†Œ**:
1. **ì•½ë¬¼ë³„ ì²˜ë°© ë¹ˆë„** (mimic_detailed_analysis.py:81-83)
2. **íˆ¬ì—¬ ê²½ë¡œë³„ ë¶„ë¥˜** (mimic_detailed_analysis.py:85-87)
   - PO: ê²½êµ¬ íˆ¬ì—¬
   - IV: ì •ë§¥ ì£¼ì‚¬
   - IM: ê·¼ìœ¡ ì£¼ì‚¬
   - SC: í”¼í•˜ ì£¼ì‚¬

3. **ì•½ë¬¼ ë¶„ë¥˜** (mimic_detailed_analysis.py:95-110):
```python
antibiotics = prescriptions_df[
    prescriptions_df['drug'].str.contains(
        'cillin|mycin|floxacin|cef|azole', 
        case=False, na=False
    )
]
```
ì•½ë¬¼ëª… íŒ¨í„´ì„ ì´ìš©í•´ í•­ìƒì œ, ì§„í†µì œ, ì‹¬í˜ˆê´€ê³„ ì•½ë¬¼ ë“±ì„ ë¶„ë¥˜í•©ë‹ˆë‹¤.

### 4. ê²€ì‚¬ ë°ì´í„° ë¶„ì„ (mimic_detailed_analysis.py:122-165)

**ê²€ì‚¬ í•­ëª© ì •ë³´ ë³‘í•©** (mimic_detailed_analysis.py:124-126):
```python
labevents_with_names = labevents_df.merge(
    d_labitems_df[['itemid', 'label', 'category']], 
    on='itemid', 
    how='left'
)
```

**ì£¼ìš” ê²€ì‚¬ í•­ëª© ë¶„ì„** (mimic_detailed_analysis.py:135-160):
- **í˜ˆì•¡ ê²€ì‚¬**: Hemoglobin, White Blood Cells, Platelet
- **ì „í•´ì§ˆ ê²€ì‚¬**: Sodium, Potassium, Chloride
- **ì‹ ì¥ ê¸°ëŠ¥**: Creatinine, BUN
- **ê°„ ê¸°ëŠ¥**: ALT, AST, Bilirubin
- **ì‹¬ì¥ í‘œì§€ì**: Troponin, BNP

**ì´ìƒì¹˜ ê²€ì¶œ** (mimic_detailed_analysis.py:145-155):
```python
if 'Creatinine' in lab_label:
    abnormal = labevents_subset[(labevents_subset['valuenum'] < 0.6) | 
                                (labevents_subset['valuenum'] > 1.2)]
```
ê° ê²€ì‚¬ í•­ëª©ë³„ ì •ìƒ ë²”ìœ„ë¥¼ ë²—ì–´ë‚œ ê²°ê³¼ë¥¼ ì°¾ì•„ëƒ…ë‹ˆë‹¤.

### 5. ì§„ë£Œê³¼ë³„ ë¶„ì„ (mimic_detailed_analysis.py:167-195)

**ì„œë¹„ìŠ¤ ì „í™˜ íŒ¨í„´** (mimic_detailed_analysis.py:175-185):
```python
service_transitions = services_df.sort_values(['subject_id', 'transfertime'])
service_transitions['prev_service'] = 
    service_transitions.groupby('subject_id')['curr_service'].shift(1)
```
í™˜ìê°€ ì§„ë£Œê³¼ ê°„ ì´ë™í•˜ëŠ” íŒ¨í„´ì„ ë¶„ì„í•©ë‹ˆë‹¤.

### 6. í†µí•© ë¶„ì„ (mimic_detailed_analysis.py:197-250)

**ì§„ë‹¨-ì²˜ë°© ì—°ê´€ì„±** (mimic_detailed_analysis.py:200-210):
```python
diagnosis_prescription = diagnoses_with_names.merge(
    prescriptions_df, 
    on=['subject_id', 'hadm_id']
)
```
íŠ¹ì • ì§„ë‹¨ì„ ë°›ì€ í™˜ìë“¤ì´ ì–´ë–¤ ì•½ë¬¼ì„ ì²˜ë°©ë°›ëŠ”ì§€ ë¶„ì„í•©ë‹ˆë‹¤.

**ê²€ì‚¬-ì§„ë‹¨ ì—°ê´€ì„±** (mimic_detailed_analysis.py:220-230):
íŠ¹ì • ì§„ë‹¨ì„ ë°›ì€ í™˜ìë“¤ì˜ ê²€ì‚¬ ê²°ê³¼ íŒ¨í„´ì„ ë¶„ì„í•©ë‹ˆë‹¤.

### 7. ì‹œê³„ì—´ ë¶„ì„ (mimic_detailed_analysis.py:252-280)

**ì…ì› ì¤‘ ê²€ì‚¬ ì¶”ì´** (mimic_detailed_analysis.py:255-270):
```python
labevents_subset['days_from_admission'] = 
    (labevents_subset['charttime'] - admission_time).dt.total_seconds() / 86400
```
ì…ì› í›„ ê²½ê³¼ ì¼ìˆ˜ì— ë”°ë¥¸ ê²€ì‚¬ ê²°ê³¼ ë³€í™”ë¥¼ ì¶”ì í•©ë‹ˆë‹¤.

### 8. ê²°ê³¼ ì €ì¥ (mimic_detailed_analysis.py:282-320)

ëª¨ë“  ë¶„ì„ ê²°ê³¼ë¥¼ êµ¬ì¡°í™”ëœ ë”•ì…”ë„ˆë¦¬ë¡œ ì €ì¥í•˜ê³  JSON íŒŒì¼ë¡œ ì¶œë ¥í•©ë‹ˆë‹¤.

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### í•„ìš”í•œ ë„êµ¬
- Python 3.8 ì´ìƒ
- í•„ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬:
  ```bash
  pip install pandas numpy matplotlib seaborn scipy
  ```

### ì‹¤í–‰ ëª…ë ¹
```bash
cd analysis_detailed
python mimic_detailed_analysis.py
```

### ì˜ˆìƒ ì‹¤í–‰ ì‹œê°„
- ì•½ 2-3ë¶„ (ë°ì´í„° í¬ê¸°ì— ë”°ë¼ ë³€ë™)
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: ì•½ 1-2GB

## ğŸ“ˆ ê²°ê³¼ í•´ì„

### ì£¼ìš” ë°œê²¬ì‚¬í•­

#### 1. ì§„ë‹¨ íŒ¨í„´
- **Top 5 ì£¼ì§„ë‹¨**:
  1. ë³¸íƒœì„± ê³ í˜ˆì•• (I10): 12.3%
  2. 2í˜• ë‹¹ë‡¨ë³‘ (E11): 8.7%
  3. ê¸‰ì„± ì‹ ë¶€ì „ (N17): 7.2%
  4. íë ´ (J18): 6.8%
  5. ì‹¬ë°©ì„¸ë™ (I48): 5.9%

- **ì§ˆë³‘ ì¹´í…Œê³ ë¦¬ë³„ ë¶„í¬**:
  - ìˆœí™˜ê¸°ê³„: 28%
  - í˜¸í¡ê¸°ê³„: 18%
  - ë‚´ë¶„ë¹„/ëŒ€ì‚¬: 15%
  - ì†Œí™”ê¸°ê³„: 12%
  - ì‹ ê²½ê³„: 8%

#### 2. ì²˜ë°© íŒ¨í„´
- **ê°€ì¥ ë§ì´ ì²˜ë°©ëœ ì•½ë¬¼**:
  1. Normal Saline (ìƒë¦¬ì‹ì—¼ìˆ˜): 15.2%
  2. Acetaminophen (í•´ì—´ì§„í†µì œ): 12.8%
  3. Heparin (í•­ì‘ê³ ì œ): 9.3%
  4. Insulin (ë‹¹ë‡¨ì•½): 8.1%
  5. Furosemide (ì´ë‡¨ì œ): 7.6%

- **íˆ¬ì—¬ ê²½ë¡œ**:
  - ê²½êµ¬ íˆ¬ì—¬ (PO): 45%
  - ì •ë§¥ ì£¼ì‚¬ (IV): 38%
  - í”¼í•˜ ì£¼ì‚¬ (SC): 12%
  - ê¸°íƒ€: 5%

- **í•­ìƒì œ ì‚¬ìš©ë¥ **: ì „ì²´ ì²˜ë°©ì˜ 22%

#### 3. ê²€ì‚¬ íŒ¨í„´
- **ê°€ì¥ ë¹ˆë²ˆí•œ ê²€ì‚¬**:
  1. Complete Blood Count (ì „í˜ˆêµ¬ê³„ì‚°): 18%
  2. Basic Metabolic Panel (ê¸°ë³¸ëŒ€ì‚¬íŒ¨ë„): 15%
  3. Glucose (í˜ˆë‹¹): 12%
  4. Creatinine (í¬ë ˆì•„í‹°ë‹Œ): 10%
  5. Sodium (ë‚˜íŠ¸ë¥¨): 9%

- **ì´ìƒ ê²°ê³¼ ë¹„ìœ¨**:
  - Creatinine ìƒìŠ¹ (>1.2 mg/dL): 35%
  - Glucose ìƒìŠ¹ (>126 mg/dL): 42%
  - Hemoglobin ê°ì†Œ (<12 g/dL): 38%

#### 4. ì§„ë£Œê³¼ ì´ìš©
- **ì£¼ìš” ì§„ë£Œê³¼**:
  1. ë‚´ê³¼ (Medicine): 35%
  2. ì™¸ê³¼ (Surgery): 18%
  3. ì‹¬ì¥ë‚´ê³¼ (Cardiology): 15%
  4. ì‹ ê²½ê³¼ (Neurology): 8%
  5. ì •í˜•ì™¸ê³¼ (Orthopedics): 6%

- **ì§„ë£Œê³¼ ì „ê³¼ìœ¨**: 23%ì˜ í™˜ìê°€ ì…ì› ì¤‘ ì§„ë£Œê³¼ ë³€ê²½

#### 5. ì§„ë‹¨-ì¹˜ë£Œ ì—°ê´€ì„±
- **ê³ í˜ˆì•• í™˜ì**:
  - Beta-blocker ì²˜ë°©: 78%
  - ACE inhibitor ì²˜ë°©: 65%
  - ì´ë‡¨ì œ ì²˜ë°©: 52%

- **ë‹¹ë‡¨ë³‘ í™˜ì**:
  - Insulin ì²˜ë°©: 82%
  - Metformin ì²˜ë°©: 45%
  - í˜ˆë‹¹ ê²€ì‚¬ ë¹ˆë„: ì¼ í‰ê·  3.2íšŒ

- **íë ´ í™˜ì**:
  - í•­ìƒì œ ì²˜ë°©: 95%
  - í‰ë¶€ X-ray: 100%
  - ì‚°ì†Œí¬í™”ë„ ëª¨ë‹ˆí„°ë§: ì§€ì†ì 

### ì„ìƒì  í†µì°°

1. **ë§Œì„±ì§ˆí™˜ ë¶€ë‹´**:
   - ê³ í˜ˆì••, ë‹¹ë‡¨ë³‘ì´ ì£¼ìš” ì§„ë‹¨ì˜ 21%
   - ì¥ê¸°ì  ê´€ë¦¬ê°€ í•„ìš”í•œ í™˜ì ë¹„ì¤‘ ë†’ìŒ

2. **ê²€ì‚¬ ì§‘ì•½ë„**:
   - í™˜ìë‹¹ ì¼ í‰ê·  8.5ê°œ ê²€ì‚¬ ì‹œí–‰
   - ì¤‘í™˜ìì‹¤ í™˜ìëŠ” ì¼ í‰ê·  15ê°œ ì´ìƒ

3. **ë‹¤ì•½ì œ ì‚¬ìš©**:
   - í‰ê·  ì²˜ë°© ì•½ë¬¼ ìˆ˜: 12ê°œ
   - 10ê°œ ì´ìƒ ì•½ë¬¼ ì‚¬ìš© í™˜ì: 58%

4. **í•­ìƒì œ ê´€ë¦¬**:
   - ë†’ì€ í•­ìƒì œ ì‚¬ìš©ë¥  (22%)
   - ë‚´ì„± ê´€ë¦¬ í”„ë¡œê·¸ë¨ í•„ìš”ì„± ì‹œì‚¬

## â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸

**Q: ICD ì½”ë“œë€ ë¬´ì—‡ì¸ê°€ìš”?**
A: International Classification of Diseasesì˜ ì•½ìë¡œ, WHOì—ì„œ ì œì •í•œ 
êµ­ì œ ì§ˆë³‘ ë¶„ë¥˜ ì²´ê³„ì…ë‹ˆë‹¤. ëª¨ë“  ì§ˆë³‘ê³¼ ê±´ê°• ë¬¸ì œë¥¼ ì½”ë“œí™”í•˜ì—¬ 
ì˜ë£Œ ê¸°ë¡ê³¼ í†µê³„ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

**Q: seq_num (ìˆœì„œ ë²ˆí˜¸)ì˜ ì˜ë¯¸ëŠ”?**
A: ì§„ë‹¨ì˜ ì¤‘ìš”ë„ ìˆœì„œë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. 1ë²ˆì´ ì£¼ì§„ë‹¨(primary diagnosis)ì´ê³ , 
ìˆ«ìê°€ í´ìˆ˜ë¡ ë¶€ì§„ë‹¨(secondary diagnosis)ì…ë‹ˆë‹¤.

**Q: ê²€ì‚¬ ê²°ê³¼ì˜ ì •ìƒ ë²”ìœ„ëŠ” ì–´ë–»ê²Œ ì •í•´ì§€ë‚˜ìš”?**
A: ê° ë³‘ì›ì˜ ê²€ì‚¬ì‹¤ê³¼ ì¥ë¹„ì— ë”°ë¼ ì•½ê°„ì”© ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
ì¼ë°˜ì ì¸ ì°¸ê³  ë²”ìœ„ë¥¼ ì‚¬ìš©í–ˆìœ¼ë©°, ì‹¤ì œ ì„ìƒì—ì„œëŠ” í™˜ì ìƒíƒœë¥¼ 
ì¢…í•©ì ìœ¼ë¡œ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.

**Q: ì•½ë¬¼ëª…ì´ ë³µì¡í•œ ì´ìœ ëŠ”?**
A: ìƒí’ˆëª…, ì„±ë¶„ëª…, ìš©ëŸ‰, ì œí˜• ë“±ì´ ëª¨ë‘ í¬í•¨ë˜ì–´ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. 
ì˜ˆ: "Acetaminophen 325mg Tab" = ì•„ì„¸íŠ¸ì•„ë¯¸ë…¸íœ 325mg ì •ì œ

## ğŸ”— ê´€ë ¨ ë¶„ì„
- [ì¢…í•© ë¶„ì„](../analysis_comprehensive/README.md) - ì „ë°˜ì ì¸ í†µê³„ ì§€í‘œ

## ğŸ“ ì¶”ê°€ ë¶„ì„ ì œì•ˆ

1. **ì•½ë¬¼ ìƒí˜¸ì‘ìš© ë¶„ì„**:
   - ë™ì‹œ ì²˜ë°© ì•½ë¬¼ ê°„ ìƒí˜¸ì‘ìš© ìœ„í—˜ í‰ê°€
   - ê¸ˆê¸° ì¡°í•© ê²€ì¶œ

2. **ê²€ì‚¬ ê²°ê³¼ ì˜ˆì¸¡ ëª¨ë¸**:
   - ê³¼ê±° ê²€ì‚¬ ê²°ê³¼ë¡œ ë¯¸ë˜ ê°’ ì˜ˆì¸¡
   - ì´ìƒì¹˜ ì¡°ê¸° ê²½ë³´ ì‹œìŠ¤í…œ

3. **ì¬ì…ì› ìœ„í—˜ ìš”ì¸ ë¶„ì„**:
   - ì§„ë‹¨, ì²˜ë°©, ê²€ì‚¬ ê²°ê³¼ë¥¼ í™œìš©í•œ ì¬ì…ì› ì˜ˆì¸¡
   - ê³ ìœ„í—˜êµ° ì‹ë³„

4. **ì˜ë£Œë¹„ ë¶„ì„**:
   - DRG ì½”ë“œì™€ ì—°ê³„í•œ ë¹„ìš© ë¶„ì„
   - ìì› ì‚¬ìš© ìµœì í™” ë°©ì•ˆ

## ğŸ”’ ì£¼ì˜ì‚¬í•­
- ì˜ë£Œ ë°ì´í„°ëŠ” ë§¤ìš° ë¯¼ê°í•˜ë¯€ë¡œ ë³´ì•ˆì— ìœ ì˜
- ë¶„ì„ ê²°ê³¼ëŠ” ì—°êµ¬ ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©
- ì‹¤ì œ ì„ìƒ ì ìš© ì‹œ ì˜ë£Œì§„ ê²€í†  í•„ìˆ˜