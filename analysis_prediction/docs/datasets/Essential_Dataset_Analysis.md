# Essential Dataset 상세 분석

## 📌 개요

Essential Dataset은 MIMIC-IV 입원 데이터에서 가장 기본적이고 필수적인 혈액검사 변수들로 구성된 데이터셋입니다. 낮은 결측률과 높은 임상적 중요도를 가진 변수들로 구성되어 있어, 베이스라인 모델 개발과 실시간 예측 시스템에 적합합니다.

---

## 📊 데이터셋 특성

| 항목 | 값 |
|------|-----|
| **파일명** | `model_dataset_essential.csv` |
| **전체 크기** | 1,200 행 × 20 열 |
| **Lab 변수 수** | 9개 |
| **평균 결측률** | 6.0% |
| **완전한 케이스** | 1,096개 (91.3%) |
| **용도** | 베이스라인 모델, 실시간 예측 |

---

## 🔍 전체 컬럼 구성 (20개)

### 1. 식별자 (2개)
| 변수명 | 설명 |
|--------|------|
| `hadm_id` | 입원 고유 ID |
| `subject_id` | 환자 고유 ID |

### 2. 인구통계 변수 (3개)
| 변수명 | 타입 | 설명 | 결측률 |
|--------|------|------|--------|
| `age` | 연속형 | 입원 시 나이 (정확히 계산됨) | 0% |
| `gender` | 범주형 | 성별 (M/F) | 0% |
| `admission_type` | 범주형 | 입원 유형 | 0% |

### 3. 타겟 변수 (5개)
| 변수명 | 타입 | 설명 | 용도 |
|--------|------|------|------|
| `death_type` | 범주형 | 사망 유형 (alive/hospital/outside) | 다중 분류 |
| `death_binary` | 이진 | 전체 사망 여부 (0/1) | 이진 분류 |
| `hospital_death` | 이진 | 병원 내 사망 여부 (0/1) | 이진 분류 |
| `los_hours` | 연속형 | 입원 시간 | 회귀 |
| `los_days` | 연속형 | 입원 일수 | 회귀 |

### 4. 기타 (1개)
| 변수명 | 설명 | 주의사항 |
|--------|------|----------|
| `hospital_expire_flag` | 병원 내 사망 플래그 | hospital_death와 중복 (제거 권장) |

---

## 🔬 Lab 변수 상세 분석 (9개)

### 혈액학 검사 (Hematology)

#### 1. **Hematocrit_51221_merged**
- **임상적 의미**: 적혈구 용적률, 빈혈 및 탈수 평가
- **결측률**: 4.3%
- **정상 범위**: 
  - 남성: 41-53%
  - 여성: 36-46%
- **중요도**: ⭐⭐⭐⭐⭐

#### 2. **Hemoglobin_51222**
- **임상적 의미**: 산소 운반 능력 평가
- **결측률**: 4.8%
- **정상 범위**: 
  - 남성: 13.5-17.5 g/dL
  - 여성: 12.0-16.0 g/dL
- **중요도**: ⭐⭐⭐⭐⭐

#### 3. **RDW_51277** (Red Cell Distribution Width)
- **임상적 의미**: 적혈구 크기 변이도, 빈혈 분류
- **결측률**: 4.9%
- **정상 범위**: 11.5-14.5%
- **중요도**: ⭐⭐⭐⭐

#### 4. **White_Blood_Cells_51301_merged**
- **임상적 의미**: 감염, 염증, 면역 상태 평가
- **결측률**: 4.8%
- **정상 범위**: 4.5-11.0 × 10³/μL
- **중요도**: ⭐⭐⭐⭐⭐

### 신장 기능 검사 (Renal Function)

#### 5. **Creatinine_50912_merged**
- **임상적 의미**: 신장 기능 평가의 핵심 지표
- **결측률**: 6.2%
- **정상 범위**: 
  - 남성: 0.7-1.3 mg/dL
  - 여성: 0.6-1.1 mg/dL
- **중요도**: ⭐⭐⭐⭐⭐

#### 6. **Urea_Nitrogen_51006_merged** (BUN)
- **임상적 의미**: 신장 기능, 탈수, 단백질 대사 평가
- **결측률**: 6.5%
- **정상 범위**: 7-20 mg/dL
- **중요도**: ⭐⭐⭐⭐⭐

### 전해질 검사 (Electrolytes)

#### 7. **Potassium_50971_merged**
- **임상적 의미**: 심장 리듬, 근육 기능에 필수
- **결측률**: 7.2%
- **정상 범위**: 3.5-5.0 mEq/L
- **중요도**: ⭐⭐⭐⭐⭐
- **위험 수준**: 
  - < 2.5 또는 > 6.5: 생명 위협

#### 8. **Sodium_50983_merged**
- **임상적 의미**: 체액 균형, 신경 기능
- **결측률**: 7.3%
- **정상 범위**: 136-145 mEq/L
- **중요도**: ⭐⭐⭐⭐⭐

### 대사 검사 (Metabolic)

#### 9. **Glucose_50931**
- **임상적 의미**: 혈당 조절, 당뇨 관리
- **결측률**: 8.4%
- **정상 범위**: 70-100 mg/dL (공복)
- **중요도**: ⭐⭐⭐⭐⭐
- **위험 수준**: 
  - < 40: 심각한 저혈당
  - > 500: 고혈당 위기

---

## 📈 결측값 패턴 분석

### 결측률 분포
```
0-5%:   4개 변수 (44.4%)
5-10%:  5개 변수 (55.6%)
10%+:   0개 변수 (0%)
```

### 결측 패턴 특징
- **매우 낮은 결측률**: 모든 변수가 10% 미만의 결측률
- **완전 케이스 비율 높음**: 91.3%의 데이터가 결측값 없음
- **계획적 결측**: CBC와 BMP는 표준 입원 검사로 대부분 시행

---

## 💡 모델링 권장사항

### 1. 결측값 처리
```python
# Option 1: 완전 케이스 분석 (91.3% 데이터 유지)
df_complete = df.dropna()

# Option 2: 단순 대체 (중앙값)
from sklearn.impute import SimpleImputer
imputer = SimpleImputer(strategy='median')
X_imputed = imputer.fit_transform(X)
```

### 2. 특징 엔지니어링
```python
# 비율 계산
df['bun_creatinine_ratio'] = df['Urea_Nitrogen'] / df['Creatinine']
df['sodium_potassium_ratio'] = df['Sodium'] / df['Potassium']

# 이상치 플래그
df['critical_potassium'] = ((df['Potassium'] < 2.5) | (df['Potassium'] > 6.5)).astype(int)
df['critical_glucose'] = ((df['Glucose'] < 40) | (df['Glucose'] > 500)).astype(int)
```

### 3. 적합한 모델
- **Logistic Regression**: 해석 가능성 높음
- **Random Forest**: 결측값에 강건
- **Gradient Boosting**: 높은 예측 성능

---

## ⚠️ 주의사항

### 1. 데이터 누수
- `hospital_expire_flag`는 타겟 변수와 중복이므로 제거 필요

### 2. 단위 확인
- 검사 결과의 단위가 병원마다 다를 수 있음
- 이상치 확인 필수

### 3. 시간적 관계
- 모든 검사는 입원 당일 시행된 것만 포함
- 시간 순서 고려 필요

---

## 🎯 활용 시나리오

### 1. 베이스라인 모델
- 새로운 예측 과제의 첫 번째 모델
- 다른 복잡한 모델과의 성능 비교 기준

### 2. 실시간 예측 시스템
- 응급실이나 입원 시점에서 즉시 예측 가능
- 대부분의 환자에게 적용 가능 (91.3%)

### 3. 해석 가능한 모델
- 변수 수가 적어 의료진이 이해하기 쉬움
- 각 변수의 영향력을 명확히 파악 가능

---

## 📊 데이터 품질 요약

| 평가 항목 | 점수 | 설명 |
|-----------|------|------|
| **완전성** | ⭐⭐⭐⭐⭐ | 평균 결측률 6.0% |
| **신뢰성** | ⭐⭐⭐⭐⭐ | 표준 검사 항목으로 구성 |
| **적용성** | ⭐⭐⭐⭐⭐ | 91.3% 환자에 즉시 적용 가능 |
| **임상적 가치** | ⭐⭐⭐⭐ | 기본 검사로 제한적이나 핵심적 |

---

## 🔗 관련 문서
- [Extended Dataset 분석](./Extended_Dataset_Analysis.md) - 더 많은 변수 포함
- [Comprehensive Dataset 분석](./Comprehensive_Dataset_Analysis.md) - 특수 검사 포함
- [모델링 가이드](../guides/Modeling_Guide.md) - 실제 모델 구현 방법

---

*작성일: 2025-01-06*  
*데이터: MIMIC-IV 샘플 1,200건*